{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Cellects User Manual","text":"<p>Welcome to the Cellects User Manual.</p> <ul> <li>Foreword </li> <li>Setting up a first analysis </li> <li>Data localisation in the first window </li> <li>Find where the specimens are in the image analysis window </li> <li>Tune parameters of the video tracking window </li> <li>Improving and personalizing the analysis </li> <li>Advanced parameters </li> <li>Required outputs </li> <li>Analyze multiple folders at once</li> </ul>"},{"location":"foreword/","title":"Foreword","text":"Cellects analyzes organisms that grow or move on an immobile surface.  In the first section of this user manual, we will explain how to set up a first quick analysis with Cellects.  Any Cellects analysis takes place in 3 steps: data specification, first image analysis and video tracking.  The second section of this user manual runs thoroughly through every option to run Cellects in particular conditions  and to finetune an already working setup."},{"location":"advanced/","title":"Improving and personalizing the analysis","text":"<p>This section covers advanced use of Cellects:</p> <ul> <li>Advanced parameters</li> <li>Required outputs</li> <li>Multi-folder analyses</li> </ul>"},{"location":"advanced/multiple-folders/","title":"Analyze multiple folders at once","text":"Figure 10: Select folders to analyze window <p>The window of Figure 10 appears after the first window when the selected folder contains subfolders with images matching the Image prefix and Images extension patterns.  </p> <p>Here, the user can: - Adjust the number of arenas for each folder - Select which folders to analyze (use <code>Ctrl/Cmd + Click</code> for multi-selection)  </p> <p>Click Next to go to the image analysis window (Fig. 2) of the first selected folder.  </p>"},{"location":"advanced/multiple-folders/#notes","title":"Notes","text":"<ul> <li> <p>If the Select and draw option is required for more than one folder, analyze them separately.   \u2192 In that case, click Previous and select only one subfolder.  </p> </li> <li> <p>If only one folder requires the Select and draw option, analyze it first.   \u2192 To do so, deselect all folders, select the one that needs drawing, then hold <code>Ctrl/Cmd</code> while selecting the others.  </p> </li> <li> <p>If the first selected folder has already been analyzed, two shortcuts appear:  </p> </li> <li>Video analysis window \u2192 skips the image analysis window, lets the user tune video tracking before running all  </li> <li>Run all directly \u2192 skips both image analysis and video tracking, applies saved settings to all folders directly  </li> </ul>"},{"location":"advanced/outputs/","title":"Required outputs","text":"Figure 9: Required output window"},{"location":"advanced/outputs/#save-presence-coordinates","title":"Save presence coordinates","text":"<p>Saves very large <code>.npy</code> files containing all presence coordinates of specimens: - Time - Y position - X position  </p>"},{"location":"advanced/outputs/#save-descriptors","title":"Save descriptors","text":"<p>Saves selected descriptors in <code>.csv</code> files at the end of the analysis (Run all).  </p> <p>Available descriptors include: - Area - Perimeter - Circularity - Rectangularity - Total hole area - Solidity - Convexity - Eccentricity - Euler number - Standard deviation (x, y) - Skewness (x, y) - Kurtosis (x, y) - Major axes lengths and angles  </p> <p>Additional algorithms: - Detect growth transition \u2192 automatically detects isotropic to digitated growth transition (Vogel et al. 2016) - Proceed oscillation analysis \u2192 analyzes intracytoplasmic oscillations of P. polycephalum   (based on Boussard et al., 2021)  </p>"},{"location":"advanced/parameters/","title":"Advanced parameters","text":"Figure 8: Advanced parameters window"},{"location":"advanced/parameters/#automatically-crop-images","title":"Automatically crop images","text":"<p>Uses the first image detection to crop all images and improve arena and last image detection.  </p> <p>\ud83d\udca1 If the analysis fails or the program crashes while running the image analysis window, unselecting this option may help.</p>"},{"location":"advanced/parameters/#subtract-background","title":"Subtract background","text":"<p>Takes the first image and subtracts it from every following image before analysis. Useful when cells are not visible in the first image. Can either improve or degrade detection depending on the dataset.</p>"},{"location":"advanced/parameters/#keep-cell-and-back-drawings-for-all-folders","title":"Keep Cell and Back drawings for all folders","text":"<p>If the user drew cell and background regions during first image analysis: - Checked \u2192 keep this information for all folders - Unchecked \u2192 only use it for the current folder</p>"},{"location":"advanced/parameters/#correct-errors-around-initial-shape","title":"Correct errors around initial shape","text":"<p>Applied only if detection is less efficient around the initial shape than in the rest of the arena. Fills potential gaps around the initial shape during growth.  </p> <p>\u26a0\ufe0f Do not use if the substrate has the same opacity everywhere (i.e. no difference between starting and growth regions).</p>"},{"location":"advanced/parameters/#prevent-fast-growth-near-periphery","title":"Prevent fast growth near periphery","text":"<p>Removes detection of specimens moving too fast near arena borders. Unchecked \u2192 no correction applied.</p>"},{"location":"advanced/parameters/#connect-distant-shapes","title":"Connect distant shapes","text":"<p>Useful when the specimen color is close to the background and causes disconnections. Reconnects disconnected parts of a specimen to the main shape dynamically.  </p>"},{"location":"advanced/parameters/#all-specimens-have-the-same-direction","title":"All specimens have the same direction","text":"<p>Improves automatic arena detection when all specimens move in the same direction. Uncheck only if specimens move strongly and in many directions.</p>"},{"location":"advanced/parameters/#appearing-cellcolony-parameters","title":"Appearing cell/colony parameters","text":"<p>Defines the minimal size threshold (in pixels) for considering an appearing shape as a colony. Two methods available: detection by size or by position in the arena.</p>"},{"location":"advanced/parameters/#oscillatory-parameters","title":"Oscillatory parameters","text":"<ul> <li>Oscillatory period \u2192 sets expected oscillation period for luminosity variations  </li> <li>Minimal oscillating cluster size \u2192 threshold to filter out small noisy oscillations  </li> </ul> <p>These parameters are linked to Oscillation Analysis (see Required outputs).</p>"},{"location":"advanced/parameters/#fractal-parameters","title":"Fractal parameters","text":"<p>Currently under development.</p>"},{"location":"advanced/parameters/#network-parameters","title":"Network parameters","text":"<ul> <li>Network detection threshold \u2192 minimum intensity difference to detect cytoplasmic tubular network  </li> <li>Mesh side length \u2192 rolling window size (pixels) for network detection  </li> <li>Mesh step length \u2192 step length (pixels) for rolling window</li> </ul>"},{"location":"advanced/parameters/#spatio-temporal-scaling","title":"Spatio-temporal scaling","text":"<p>Defines the spatiotemporal scale of the dataset: - Time between images or frames (minutes) - Option to convert areas/distances from pixels to mm/mm\u00b2  </p>"},{"location":"advanced/parameters/#run-analysis-in-parallel","title":"Run analysis in parallel","text":"<p>Checked \u2192 use multiple CPU cores to analyze arenas in parallel (faster). Unchecked \u2192 single core analysis.</p>"},{"location":"advanced/parameters/#proc-max-core-number","title":"Proc max core number","text":"<p>Maximum number of logical CPU cores to use during analysis.  </p>"},{"location":"advanced/parameters/#minimal-ram-let-free","title":"Minimal RAM let free","text":"<p>Amount of RAM to leave available for other programs. Setting to <code>0</code> gives Cellects all memory, but increases crash risk if other apps are open.</p>"},{"location":"advanced/parameters/#lose-accuracy-to-save-ram","title":"Lose accuracy to save RAM","text":"<p>For low-memory systems: - Converts video from <code>np.float64</code> to <code>uint8</code> - Saves RAM at the cost of a slight precision loss</p>"},{"location":"advanced/parameters/#video-fps","title":"Video fps","text":"<p>Frames per second of validation videos.</p>"},{"location":"advanced/parameters/#keep-unaltered-videos","title":"Keep unaltered videos","text":"<p>Keeps unaltered <code>.npy</code> videos (faster re-runs, but large files). Recommended to delete them once analysis is finalized.</p>"},{"location":"advanced/parameters/#saved-processed-video","title":"Saved processed video","text":"<p>Saves lightweight processed validation videos (recommended over unaltered videos). Can be read in standard video players.</p>"},{"location":"advanced/parameters/#color-space-combination-for-video-analysis","title":"Color space combination for video analysis","text":"<p>Advanced option to change RGB processing directly in the video tracking window. Useful to test new color spaces without redoing image analysis.</p>"},{"location":"advanced/parameters/#heterogeneous-background","title":"Heterogeneous background","text":"<p>Segments the image into 2+ categories using a k-means algorithm. Much slower than thresholding but works in more complex environments. Should be used as a last resort.</p>"},{"location":"advanced/parameters/#night-mode","title":"Night mode","text":"<p>Switches the application background between light and dark themes.</p>"},{"location":"first-analysis/","title":"Setting up a first analysis","text":"<p>This section describes the three main steps of a first analysis:</p> <ol> <li>Data localisation in the first window</li> <li>Finding where the specimens are in the image analysis window</li> <li>Tuning parameters of the video tracking window</li> </ol>"},{"location":"first-analysis/data-localisation/","title":"Data localisation in the first window","text":"<p>On first use (Fig. 1), Cellects needs to identify what type of data to look for.  </p> Figure 1: Cellects first window <p>Cellects requires a folder containing one stack of images or one video to run an analysis (See Fig. 1).  When the user selects several folders, Cellects uses the parameters filled for the first one  to analyze all the remaining folders (See Fig. 10: the several folder window).  The available variables are shown in Fig. 9: the required output window.</p>"},{"location":"first-analysis/data-localisation/#image-list-or-video","title":"Image list or video","text":"<p>The Image list or video option indicates whether the data have been stored as an image stack  (i.e. a set of files, each of them containing a single image) or as a video.  Images must be named alphanumerically so the program can read them in the right order.</p>"},{"location":"first-analysis/data-localisation/#image-prefix-and-extension","title":"Image prefix and extension","text":"<p>The Images prefix and Images extension fields allow Cellects to only consider relevant data.  For instance, setting \u201cexp_\u201d as image prefix and \u201c.jpg\u201d as image extension will cause Cellects to only consider JPG  files whose name starts with \u201cexp_\u201d.  The rest of the labeling should be a number indicating the order in which the images were taken.</p> <p>Additional note: - Image prefix is optional - If every .jpg files start with IMG_ but the folder(s) also contains other .jpg files (e.g. named info.jpg),  the user can exclude all .jpg files that do not start with IMG_ by typing \u201cIMG_\u201d in the Image prefix field.  Cellects accepts all the following formats: bmp, dib, exr, exr, hdr, jp2, jpe, jpeg, jpg, pbm, pfm, pgm, pic, png,  pnm, ppm, ras, sr, tif, tiff, webp, cr2, cr3, nef, arw, sr2, raf, prf, rw2, pef, dng, 3fr, iiq.</p>"},{"location":"first-analysis/data-localisation/#folder","title":"Folder","text":"<p>The Folder field must contain the computer path toward the folder(s) for Cellects to be able to run the analysis.  The user can copy/paste this path into the field or navigate to the folder using the Browse push-button.  If the user wants to analyze several folders at once, the chosen path must lead to the folder containing all folders  to analyze.</p>"},{"location":"first-analysis/data-localisation/#arena-number-per-folder","title":"Arena number per folder","text":"<p>The Arena number per folder tells how many arenas are present in the images.  Then it will store and analyze the video for each arena separately.</p> <p>Additional note: - If there are several folders to analyze at once, the user can provide a different arena number for each folder   (see Fig. 10: the several folder window).</p>"},{"location":"first-analysis/data-localisation/#advanced-parameters-and-required-outputs","title":"Advanced parameters and Required outputs","text":"<p>These options are detailed in Improving and personalizing the analysis (Fig. 8 and 9).</p>"},{"location":"first-analysis/data-localisation/#video-analysis-window-and-run-all-directly","title":"Video analysis window and Run all directly","text":"<p>These options appear when the user already did the image analysis for the current folder.  These shortcuts allow to skip the image analysis and to directly improve the video tracking or  to run directly the complete analysis.</p>"},{"location":"first-analysis/data-localisation/#next","title":"Next","text":"<p>Click the Next button to go to the image analysis window (Fig. 2), or  to the window showing the list of folders (Fig. 10) if applicable.</p>"},{"location":"first-analysis/image-analysis/","title":"Find where the specimens are in the image analysis window","text":"Figure 2: Cellects image analysis window"},{"location":"first-analysis/image-analysis/#image-number","title":"Image number","text":"<p>Which image should be analyzed first? In most cases, it should be the first. Changing this number is only useful when cells are invisible on the first image  (e.g. in the case of appearing colonies of bacteria). In that case, select an image showing visible cells in order to enable Cellects to find them.</p>"},{"location":"first-analysis/image-analysis/#one-cell-or-colony-per-arena","title":"One cell or colony per arena","text":"<p>This option is automatically selected. If there is only one cell (or connected colony) per arena, leave this as it is. If there already are (or will be) several cells (or colonies) per arena, unselect this option.</p>"},{"location":"first-analysis/image-analysis/#scale-with","title":"Scale with","text":"<p>The Scale with option gives a scale to the image. Cellects can determine this scale using the width (horizontal size) of the image or the width of the specimens  on the first image (when they share the same width, Cellects can use the average pixel width of all specimens to get the scale).  </p> <p>Additional notes: - Using the width of the specimens decreases the first image detection efficiency, we recommend choosing the width of the image. - However, if the width of the specimens is known with more accuracy than the width of the image, choose the width of the specimens. - By default, distances and surfaces are in pixels (Cellects stores the size of one pixel in a file called <code>software_settings.csv</code>).   They can automatically be converted in mm\u00b2 by checking the corresponding checkbox in the advanced parameters window (see Fig. 8).</p>"},{"location":"first-analysis/image-analysis/#scale-size","title":"Scale size","text":"<p>The Scale size is the length (in mm) of the item(s) used for scaling. </p>"},{"location":"first-analysis/image-analysis/#select-and-draw","title":"Select and draw","text":"<p>Select and draw is a tool allowing the user to inform Cellects that some parts of the image are specimens (Cell)  and others are background (Back).  </p> <p>To use that tool, the user must click once on the Cell button (to draw a part of the image containing specimens) or  on the Back button (to draw a part of the image containing background). The color of the clicked button changes and the user can click and move the cursor on the image to draw the position  of the specimens or of the background. Each drawing will also appear (with a number) below the corresponding button. If the user clicks on one of these numbered drawings, the corresponding selected area disappears,  enabling the user to correct mistakes.</p> <p>Additional note: - If the user wishes to analyze several folders, the Select and draw option will only work for the first. - If each folder requires using this option, the user has to analyze each folder separately.</p>"},{"location":"first-analysis/image-analysis/#advanced-mode","title":"Advanced mode","text":"<p>The Advanced mode allows Cellects to use a previously working set of parameters.  </p> <p>Once generated, selecting these options with Advanced mode activated allow to: - See the color space combination corresponding to the displayed image. - Try a new color space combination by mixing two good options. - Use a logical operator (AND/OR) between results of two color space combinations. - Apply grid segmentation using Otsu thresholding. - Use more than two colors with a k-means categorization.  </p> <p>This option is powerful but should only be used by advanced users.</p>"},{"location":"first-analysis/image-analysis/#generate-analysis-option","title":"Generate analysis option","text":"<p>Cellects suggests two algorithms to automatically find the best parameters to detect specimens on the first image:  </p> <ul> <li>Quickly \u2192 suggests options in a few minutes.  </li> <li>Carefully \u2192 browses more possibilities, takes longer.  </li> </ul> <p>Alternatively, the user can select Advanced mode to view or modify the parameters selected by Cellects.  </p> <p>Additional notes: - Clicking on Quickly or Carefully (or Visualize) will make an orange working message appear. - If the user already used Cellects, the advanced mode will be faster.  </p> Figure 3: Cellects image analysis window after analysis option generation"},{"location":"first-analysis/image-analysis/#select-option-to-read","title":"Select option to read","text":"<p>The drop-down menu on the left of Select option to read allows the user to visualize directly the result of  the analysis corresponding to each option.  </p> <p>For instance, in Fig. 3, the central image displays the result of option 1 and a message below informs the user that this option detected 6 distinct spots in 6 arenas. Since these two numbers are equal, there is only one specimen per arena, so the user should click the Yes button.  </p> <p>Otherwise, the user can improve the analysis by setting the arena shape, the spot shape, or the spot size. The user can also draw more specimens or background using Select and draw, or use Visualize to set up manually a color space combination.</p> <p>Once the magenta/pink contours correspond to the right position of all cells and the right number of detected spots,  the user can click the Yes button.  </p> <p>After clicking, an orange working message appears, and Cellects automatically looks for the coordinates of the contour of each arena.  </p>"},{"location":"first-analysis/image-analysis/#arena-shape","title":"Arena shape","text":"<p>Tells whether the specimen(s) can move in a circular or rectangular arena.</p>"},{"location":"first-analysis/image-analysis/#spot-shape","title":"Spot shape","text":"<p>Initial shape of the specimen(s) inside arena(s).</p>"},{"location":"first-analysis/image-analysis/#spot-size","title":"Spot size","text":"<p>Initial horizontal size of the specimen(s). If similar across all specimens, this can also be used as a scale.</p>"},{"location":"first-analysis/image-analysis/#video-delimitation","title":"Video delimitation","text":"<p>After validating the initial detection, the result of the automatic video delimitation appears in blue in the center of the window (see Fig. 4).  </p> <p>If correct, click Yes. If incorrect, click No, and Cellects will suggest: - A slower, more efficient algorithm - Or a manual delineation option  </p> Figure 4: Cellects image analysis window, after arena delineation"},{"location":"first-analysis/image-analysis/#last-image-question","title":"Last image question","text":"<p>If the user thinks that parameters used on the first image might not work on later images, they can fine-tune them using the last image.  </p> <ul> <li>Clicking Yes \u2192 allows testing on the last image before moving on.  </li> <li>Clicking No \u2192 goes directly to video tracking.</li> </ul>"},{"location":"first-analysis/image-analysis/#check-if-the-starting-area-differs-from-growing-area","title":"Check if the starting area differs from growing area","text":"<p>If the substrate changes between starting and growing areas (e.g. oat gel vs transparent agar), keep this checked. If the substrate is homogeneous everywhere, uncheck this option.</p>"},{"location":"first-analysis/video-tracking/","title":"Tune parameters of the video tracking window","text":"Figure 5: Cellects video tracking window"},{"location":"first-analysis/video-tracking/#arena-to-analyze","title":"Arena to analyze","text":"<p>The arena to analyze is a number allowing Cellects and the user to identify one arena in particular. If there is only one arena, this number should be one. Cellects automatically names the arena according to their position in the image, from left to right and from top to bottom.</p>"},{"location":"first-analysis/video-tracking/#maximal-growth-factor","title":"Maximal growth factor","text":"<p>This factor should be increased if the analysis underestimates the cell size, and decreased if it overestimates.  </p> <p>It is a proportion of pixels in the image and indicates how far the specimen can possibly move or grow from one image to the next. More precisely, it is the upper limit of the proportion of the image that can go from background to specimen between frames.</p>"},{"location":"first-analysis/video-tracking/#repeat-video-smoothing","title":"Repeat video smoothing","text":"<p>Increasing this value will decrease noise when the slope option is chosen.  </p> <p>Cellects analyzes the intensity dynamics of each pixel in the video. When it uses a threshold algorithm based on derivative (slope evolution), it starts by smoothing every pixel intensity curve. This algorithm (a moving average) can be repeated several times to make the curve smoother. This value corresponds to the number of times to apply smoothing.</p>"},{"location":"first-analysis/video-tracking/#segmentation-method-and-compute-all-options","title":"Segmentation method and compute all options","text":"<p>Cellects offers five analysis options for video tracking:  </p> <ul> <li>Frame option \u2192 applies the algorithm used during the image analysis window, frame by frame, without temporal dynamics.  </li> <li>Threshold option \u2192 compares pixel intensity with the average intensity of the whole image at each time step.  </li> <li>Slope option \u2192 compares slope of the pixel intensity with an automatically defined slope threshold.  </li> <li>T and S option \u2192 logical AND of threshold and slope options.  </li> <li>T or S option \u2192 logical OR of threshold and slope options.  </li> </ul> <p>Additional note: - When Heterogeneous background has been checked in the image analysis window, only the Frame option remains available.</p>"},{"location":"first-analysis/video-tracking/#load-one-arena","title":"Load one arena","text":"<p>Clicking this button loads the arena corresponding to the number entered in Arena to analyze. The center of the window then displays the video of the corresponding arena. </p>"},{"location":"first-analysis/video-tracking/#detection","title":"Detection","text":"<p>Detection runs one or all options of video tracking for the chosen arena. It allows testing the effect of parameter changes in this window.  </p> <p>Once detection seems valid, the user can answer \u201cDone\u201d to Step 1: Tune parameters to improve Detection, and proceed to Post-processing.</p> Figure 6: Cellects video tracking window during detection visualization"},{"location":"first-analysis/video-tracking/#fading-detection","title":"Fading detection","text":"<p>Fading detection (Fig. 6) is useful when the specimens not only grow but also move. This means a pixel that was covered may later be uncovered.  </p> <p>When checked, Fading detection monitors cell-covered areas to decide when they are abandoned. It can take a value between -1 and 1:</p> <ul> <li>Near -1 \u2192 Cellects almost never detects abandonment  </li> <li>Near +1 \u2192 Cellects may wrongly remove detection everywhere  </li> <li>Too high values can also cause wave-like artifacts  </li> </ul>"},{"location":"first-analysis/video-tracking/#post-processing","title":"Post processing","text":"<p>Post-processing (Fig. 6) applies the chosen detection algorithm to the video, plus additional algorithms to improve detection:  </p> <ul> <li>Fading detection (as described above)  </li> <li>Correct errors around initial shape (fine-tuning in advanced parameters, see Fig. 8)  </li> <li>Connect distant shapes (fine-tuning in advanced parameters, see Fig. 8)  </li> <li>Standard binary image operations: opening, closing, logical ops  </li> </ul> <p>Once Post-processing works, the user can click \u201cDone\u201d to Step 2: Tune fading and advanced parameters to improve Post-processing, and then analyze all arenas (Run All).</p> Figure 7: Cellects video tracking window, running all arenas"},{"location":"first-analysis/video-tracking/#run-all","title":"Run All","text":"<p>If detection with Post-processing leads to a satisfying result for one arena, the user can apply the current parameters to all arenas.  </p> <p>Clicking Run All will: 1. Write the uncompressed video of each arena to the folder (can take a lot of space) 2. Analyze videos one by one (Fig. 7) 3. Save the Required output (.csv files), validation videos, and two snapshots per arena (after 1/10 of total time and at the last image)</p>"},{"location":"first-analysis/video-tracking/#save-one-result","title":"Save one result","text":"<p>This button is used only after running Run All at least once.  </p> <p>If most arenas analyzed well, but one failed, the user can: 1. Run all arenas once with the best parameters (even if imperfect for one arena) 2. Adjust parameters to fix the failing arena 3. Click Save one result to replace the saved results for that arena (CSV rows + validation video)</p>"}]}